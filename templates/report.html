<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inspection Report</title>
    <link rel="stylesheet" href=".static/css/reportStyle.css" />
    <style>/* General Styles */
      body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          color: #333;
          line-height: 1.6;
      }
      
      /* Title Page - Portrait Orientation */
      @page:first {
          size: A4 portrait; /* Portrait orientation for the first page */
          margin-top: 10mm; /* Remove top margin */
          margin-left: 20mm;
          margin-right: 20mm;
          margin-bottom: 20mm; /* 20mm margin on all other sides */
      }
      
      /* Other Pages - Landscape Orientation */
      @page {
          size: A4 landscape; /* Landscape orientation for subsequent pages */
          margin: 20mm;
      }
      
      @media print {
          /* Ensure the footer is fixed at the bottom of the page */
          .footer {
              position: fixed;
              bottom: -10mm; /* Stick to the bottom of the page */
              left: 0;
              right: 0;
              text-align: center;
              font-size: 12px;
              color: #666;
              width: 100%;
              padding: 5px 0;
              background-color: transparent; /* No background color */
          }
      
          .page {
              position: relative; /* Ensure content doesn't overlap the footer */
              min-height: calc(100vh - 20mm); /* Account for @page margin */
              margin-bottom: 20mm; /* Leave room for the footer */
          }
      
          .page-break {
              page-break-before: always;
          }
      
          .title-page {
              page-break-after: always;
          }
      }
      
      
      
      
      
      /* Header Styles */
      .header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 10px 20px;
          border-bottom: 2px solid #004d99;
      }
      
      .header img {
          max-height: 50px;
      }
      
      .customer-info h2 {
          margin: 0;
          font-size: 18px;
          color: #004d99;
      }
      
      .customer-info p {
          margin: 0;
          font-size: 14px;
      }
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      .title-header-image img {
          max-width: 80%; /* Restrict width to 80% of the container */
          max-height: 400px; /* Limit the height to a reasonable size */
          margin: 20px auto; /* Center the image with some margin */
          display: block; /* Ensure proper alignment */
          object-fit: contain; /* Maintain aspect ratio */
      }
      
      
      .title-header {
          text-align: center;
          position: relative;
          
          padding: 0; /* Remove padding from the header */
          margin: 0; /* Remove any default margin */
        }
      
      
      
      .title-logo {
          margin: 0; /* Remove margin from the logo container */
          padding: 0; /* Remove padding from the logo container */
      }
      
      .title-logo img {
          
          max-height: 100px;
          display: block;
          margin: 0 auto; /* Center the image */
      }
        
        .company-contact-info {
          position: absolute;
          top: 15mm;
          right: 0mm;
          font-size: 12px;
          line-height: 1.4;
          text-align: right;
          color: #666;
          white-space: normal; /* Allows wrapping */
          word-wrap: break-word; /* Ensures long words break if necessary */
        }
        
        .contact-email,
        .contact-address {
          margin: 0;
        }
        
        .title-divider {
          border: 1px solid #ddd;
          margin: 20px 0;
        }
        
        .title-summary {
          text-align: center;
          margin-top: 20px;
          font-size: 20px;
        }
        
        .main-heading {
          font-size: 28px;
          margin: 10px 0;
        }
        
        .title-summary .description {
          font-size: 18px; /* Adjust the size as needed */
          line-height: 1.5; /* Optional: Improve line spacing for readability */
          color: #333; /* Optional: Make the text color darker for better contrast */
      }
      
      
      
      
      /* Revisions Table Styling */
      .revisions-table {
          margin-top: 20px;
          width: 100%;
          text-align: left;
      }
      
      .revisions-table .table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 20px;
          font-size: 14px;
      }
      
      .revisions-table .table th,
      .revisions-table .table td {
          padding: 4px 8px; /* Reduced padding to bring rows closer together */
          border: 1px solid #ddd;
      }
      
      .revisions-table .table th {
          background-color: #f2f2f2;
          font-weight: bold;
      }
      
      .revisions-table .table tr:nth-child(even) {
          background-color: #f9f9f9;
      }
      
      .revisions-table .table tr:hover {
          background-color: #f1f1f1;
      }
      
      
      
      
      
      
      
      
      
      
      /* Table */
      .table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          font-size: 14px;
          text-align: left;
      }
      
      .table th,
      .table td {
          padding: 8px 12px;
      }
      
      .table th {
          border-bottom: 2px solid #ddd; /* Underline header row */
          background-color: #f9f9f9; /* Subtle background for headers */
          color: #333; /* Darker text color for contrast */
          font-weight: bold;
      }
      
      .table tr:nth-child(even) {
          background-color: #f9f9f9; /* Light gray striping for even rows */
      }
      
      .table tr:hover {
          background-color: #f1f1f1; /* Highlight row on hover for better interaction */
      }
      
      .table td {
          border-bottom: 1px solid #ddd; /* Thin horizontal lines between rows */
      }
      
      .table tr:last-child td {
          border-bottom: none; /* Remove the bottom border from the last row */
      }
      
      /* Inspection Details */
      .inspection-details {
          display: flex;
          justify-content: space-between;
          margin: 20px 0;
          gap: 20px; /* Add space between the text and image */
          flex-wrap: wrap; /* Allow the content to wrap on smaller screens */
          max-height: 100%; /* Prevent the content from overflowing */
          position: relative; /* Allow proper positioning of image */
      }
      
      .inspection-details .text {
          width: 100%; /* Default to full width for smaller screens */
          max-width: 70%; /* Limit width on larger screens */
          white-space: normal; /* Allow text to wrap */
      }
      
      
      
      
      /* Fix the image size and position it on the far right */
      .inspection-details img {
          width: 300px; /* Set a fixed width for the image */
          height: auto; /* Maintain the aspect ratio */
          position: absolute; /* Position it absolutely */
          right: 20mm; /* Align it to the right with some margin */
          top: mm; /* Adjust top position if needed */
          object-fit: contain; /* Ensure image scaling is correct */
      }
      
      /* Inspection Details */
      .inspection-details {
          display: flex;
          justify-content: space-between;
          margin: 20px 0;
          gap: 20px; /* Add space between the text and image */
          flex-wrap: wrap; /* Allow the content to wrap on smaller screens */
          max-height: 100%; /* Prevent the content from overflowing */
          position: relative; /* Allow proper positioning of image */
      }
      
      .inspection-details .text {
          width: 100%; /* Default to full width for smaller screens */
          max-width: 70%; /* Limit width on larger screens */
          white-space: normal; /* Allow text to wrap */
      }
      
      /* Figure Styling */
      .inspection-details figure {
          position: absolute; /* Keep figure positioned to the right */
          right: -10mm; /* Align figure to the far right */
          top: 0mm; /* Adjust top position as needed */
          width: 320px; /* Fixed width for the figure */
          text-align: left; /* Center-align content within the figure */
          margin: 0; /* Reset default margin */
      }
      
      /* Caption Styling (Above the Image) */
      /* Caption Styling (Underneath the Image and Moved Left) */
      .inspection-details figure figcaption {
          margin-bottom: 5mm; /* Space between image and caption */
          font-size: 14px; /* Small font size for the caption */
          color: #666; /* Subtle text color */
          text-align: left; /* Center-align the caption */
          display: block; /* Ensure caption behaves like a block element */
          position: relative; /* Enable offset adjustments */
          left: -20mm; /* Move caption 10mm to the left */
      }
      
      
      /* Image Styling */
      .inspection-details figure img {
          width: 100%; /* Match the figure's width */
          height: auto; /* Maintain aspect ratio */
          object-fit: contain; /* Ensure proper scaling */
          display: block; /* Ensure the image behaves like a block element */
          margin: 0 auto; /* Center the image */
      }
      
      
      
      /* Responsive Design for Smaller Screens */
      @media (max-width: 768px) {
          .inspection-details .text {
              width: 100%; /* Take up full width */
          }
      
          .inspection-details figure {
              position: static; /* Reset positioning */
              margin: 20px auto; /* Center align the figure */
              max-width: 100%; /* Allow figure to scale */
          }
      
          .inspection-details figure img {
              max-width: 100%; /* Allow image to scale */
          }
      
          .inspection-details figure figcaption {
              text-align: center; /* Ensure caption remains centered */
          }
      }</style>
  </head>
  <body>
    <div class="content">
        <!-- Title Page -->
        <div class="page">
          <div class="title-page">
            <div class="title-header">
              <div class="title-logo">
                <img src="{{ logo }}" alt="Customer Logo" />
              </div>
              <div class="company-contact-info">
                <p class="contact-email">0404 280 928</p>
                <p class="contact-address">unit 8B 13 Hartley Drive</p>
                <p class="contact-address">Thornton NSW</p>
              </div>
            </div>
        
            <!-- Divider -->
            <hr class="title-divider" />
            
            <div class="title-summary">
              <h1 class="main-heading">{{inspection_header.title}}</h1>
              <div class="title-header-image">
                <img src="{{ inspection_header.image_url }}" alt="Inspection Image" />
              </div>
              <div class="customer-info">
                <p class="description">{{ inspection_header.summary }}</p>
              </div>
            </div>
        


            <div class="revisions-table">
              <h3>Revisions</h3>
              <table class="table">
                  <thead>
                      <tr>
                          <th>Date</th>
                          <th>Status</th>
                          <th>Detail</th>
                          <th>Issued By</th>
                      </tr>
                  </thead>
                  <tbody>
                    {% for revision in revisions %}
                    <tr>
                        <td>{{ revision.date }}</td>
                        <td>{{ revision.status }}</td>
                        <td>{{ revision.detail }}</td>
                        <td>{{ revision.issued_by }}</td>
                    </tr>
                    {% endfor %}
                      
                  </tbody>
              </table>
          </div>



          </div>
        
          <div class="footer">Report by HV Engineers Pty Ltd</div>
        </div>
         



        
        <div class="page-break"></div>

      <!-- Inspection Table Page -->
      <div class="page">
        <div class="header">
          <img src="{{ logo }}" alt="Customer Logo" />
          <h1>List of Priorities</h1>
          <div class="customer-info">
            <h2>{{ customer.name }}</h2>
            <p>{{ inspection_header.description }}</p>
            <p>{{ inspection_header.date }}</p>
          </div>
        </div>
        <div class="inspection-table">
          <h3>Inspection Summary</h3>
          <table class="table">
            <thead>
              <tr>
                <th>Area</th>
                <th>Unit</th>
                <th>Item</th>
                <th>Action Required</th>
                <th>Observations</th>
                <th>recommendations</th>
                <th>Time Ranking</th>
              </tr>
            </thead>
            <tbody>
              {% for row in rows %}
              <tr>
                <td>{{ row.area }}</td>
                <td>{{ row.unit }}</td>
                <td>{{ row.item }}</td>
                <td>{{ 'Yes' if row.action_required else 'No' }}</td>
                <td>{{ row.observations }}</td>
                <td>{{ row.recommendations }}</td>
                <td>{{ row.time_ranking }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="footer"></div>
      </div>
      <div class="page-break"></div>

      <!-- Detailed Inspection Pages -->
      {% for row in rows %}
      <div class="page">
        <div class="header">
          <img src="{{ logo }}" alt="Customer Logo" />
          <h1 class="inspection-detail">Inspection Report - Detail Sheet</h1>
          <div class="customer-info">
            <h2>{{ customer.name }}</h2>
            <p>{{ inspection_header.description }}</p>
            <p>{{ inspection_header.date }}</p>
          </div>
        </div>
        <div class="inspection-details">
          <div class="text">
            <h3>Inspection Details for: {{ row.item }}</h3>
            <p>
              <strong>Action Required:</strong> {{ 'Yes' if row.action_required
              else 'No' }}
            </p>
            <p><strong>Time Ranking:</strong> {{ row.time_ranking }}</p>
            <p><strong>Area:</strong> {{ row.area }}</p>
            <p><strong>Unit:</strong> {{ row.unit }}</p>
            <p><strong>Item:</strong> {{ row.item }}</p>
            <p><strong>Probability:</strong> {{ row.probability }}</p>
            <p><strong>Consequence:</strong> {{ row.consequence }}</p>
            <p><strong>Observations:</strong> {{ row.observations }}</p>
            <p><strong>Recommendations:</strong> {{ row.recommendations }}</p>
          </div>
          <figure>
            {% if row.image_url %}

            <figcaption>Caption: {{ row.picture_caption }}</figcaption>
            <img src="{{ row.image_url }}" alt="Inspection Image" />

            {% endif %}
          </figure>
        </div>

        <div class="footer">Report by HV Engineers Pty Ltd</div>
      </div>
      <div class="page-break"></div>
      {% endfor %}
    </div>
  </body>
</html>
